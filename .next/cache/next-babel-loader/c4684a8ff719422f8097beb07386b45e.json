{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\X\\\\Desktop\\\\MIT-Bootcamp-WebDev\\\\Week29\\\\setting-up-stripe_starter\\\\components\\\\restaurantList.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useContext } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport Dishes from \"./dishes\";\nimport Drinks from \"./drinks\";\nimport AppContext from \"./context\";\nimport { Button, Card, CardBody, CardImg, CardText, CardTitle, Col, Container, Row } from 'reactstrap';\n\nfunction RestaurantList(props) {\n  const {\n    cart\n  } = useContext(AppContext);\n  const {\n    0: state,\n    1: setState\n  } = useState(cart);\n  const GET_RESTAURANTS = gql`\n    query {\n      restaurants {\n        id\n        name\n        description\n        image {\n          url\n        }\n        dishes {\n          id\n          name\n          description\n          price\n        }\n        drinks {\n          id\n          price\n          name\n          description\n        }\n      }\n    }\n  `;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_RESTAURANTS);\n  const {\n    0: selectedRestaurant,\n    1: setSelectedRestaurant\n  } = useState(null);\n  if (loading) return __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 23\n    }\n  }, \"Loading...\");\n\n  if (error) {\n    console.log(error);\n    return __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 12\n      }\n    }, \"ERROR\");\n  }\n\n  if (!data) return __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 21\n    }\n  }, \"Not found\");\n  console.log(`Query Data: ${data.restaurants}`);\n  let searchQuery = data.restaurants.flatMap(res => {\n    const filteredDishes = res.dishes.filter(dish => dish.name.toLowerCase().includes(props.search));\n    const filteredDrinks = res.drinks.filter(drink => drink.name.toLowerCase().includes(props.search));\n\n    if (filteredDishes.length + filteredDrinks.length === 0) {\n      return [];\n    } else {\n      return [_objectSpread(_objectSpread({}, res), {}, {\n        dishes: filteredDishes,\n        drinks: filteredDrinks,\n        showDishes: false,\n        showDrinks: false,\n        matched: filteredDishes.length > 0 || filteredDrinks.length > 0\n      })];\n    }\n  }).filter(res => res.matched);\n\n  const handleRestaurantClick = restaurant => {\n    setSelectedRestaurant(restaurant);\n  };\n\n  const renderDishes = () => {\n    if (!selectedRestaurant) return null;\n    return __jsx(Dishes, {\n      restId: selectedRestaurant.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 14\n      }\n    });\n  };\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, searchQuery.length > 0 ? searchQuery.map(restaurant => __jsx(\"div\", {\n    key: restaurant.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, restaurant.name), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, restaurant.description), __jsx(\"img\", {\n    src: restaurant.image.url,\n    alt: restaurant.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }), __jsx(\"button\", {\n    onClick: () => handleRestaurantClick(restaurant),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, \"View Dishes\"), restaurant.showDishes && __jsx(DishesList, {\n    dishes: restaurant.dishes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }), restaurant.showDrinks && __jsx(DrinksList, {\n    drinks: restaurant.drinks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }))) : __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"No results found\"), renderDishes());\n}\n\nexport default RestaurantList;","map":{"version":3,"sources":["C:/Users/X/Desktop/MIT-Bootcamp-WebDev/Week29/setting-up-stripe_starter/components/restaurantList.js"],"names":["React","useState","useContext","gql","useQuery","Dishes","Drinks","AppContext","Button","Card","CardBody","CardImg","CardText","CardTitle","Col","Container","Row","RestaurantList","props","cart","state","setState","GET_RESTAURANTS","loading","error","data","selectedRestaurant","setSelectedRestaurant","console","log","restaurants","searchQuery","flatMap","res","filteredDishes","dishes","filter","dish","name","toLowerCase","includes","search","filteredDrinks","drinks","drink","length","showDishes","showDrinks","matched","handleRestaurantClick","restaurant","renderDishes","id","map","description","image","url"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { gql, useQuery } from \"@apollo/client\";\nimport Dishes from \"./dishes\";\nimport Drinks from \"./drinks\";\nimport AppContext from \"./context\";\nimport { Button, Card, CardBody, CardImg, CardText, CardTitle, Col, Container, Row } from 'reactstrap';\n\n\nfunction RestaurantList(props) {\n  const { cart } = useContext(AppContext);\n  const [state, setState] = useState(cart);\n  const GET_RESTAURANTS = gql`\n    query {\n      restaurants {\n        id\n        name\n        description\n        image {\n          url\n        }\n        dishes {\n          id\n          name\n          description\n          price\n        }\n        drinks {\n          id\n          price\n          name\n          description\n        }\n      }\n    }\n  `;\n  const { loading, error, data } = useQuery(GET_RESTAURANTS);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n\n  if (loading) return <p>Loading...</p>;\n  if (error) {\n    console.log(error);\n    return <p>ERROR</p>;\n  }\n  if (!data) return <p>Not found</p>;\n  console.log(`Query Data: ${data.restaurants}`);\n\n  let searchQuery = data.restaurants.flatMap((res) => {\n    const filteredDishes = res.dishes.filter((dish) =>\n      dish.name.toLowerCase().includes(props.search)\n    );\n    const filteredDrinks = res.drinks.filter((drink) =>\n      drink.name.toLowerCase().includes(props.search)\n    );\n    if (filteredDishes.length + filteredDrinks.length === 0) {\n      return [];\n    } else {\n      return [\n        {\n          ...res,\n          dishes: filteredDishes,\n          drinks: filteredDrinks,\n          showDishes: false,\n          showDrinks: false,\n          matched: filteredDishes.length > 0 || filteredDrinks.length > 0,\n        },\n      ];\n    }\n  }).filter((res) => res.matched);\n\n  const handleRestaurantClick = (restaurant) => {\n    setSelectedRestaurant(restaurant);\n  };\n\n  \n  \n    const renderDishes = () => {\n      if (!selectedRestaurant) return null;\n      return <Dishes restId={selectedRestaurant.id} />;\n    };\n  \n    return (\n      <div>\n        {searchQuery.length > 0 ? (\n          searchQuery.map((restaurant) => (\n            <div key={restaurant.id}>\n              <h2>{restaurant.name}</h2>\n              <p>{restaurant.description}</p>\n              <img src={restaurant.image.url} alt={restaurant.name} />\n              <button onClick={() => handleRestaurantClick(restaurant)}>\n                View Dishes\n              </button>\n              {restaurant.showDishes && (\n                <DishesList dishes={restaurant.dishes} />\n              )}\n              {restaurant.showDrinks && (\n                <DrinksList drinks={restaurant.drinks} />\n              )}\n            </div>\n          ))\n        ) : (\n          <p>No results found</p>\n        )}\n        {renderDishes()}\n        \n      </div>\n    );\n  }\n  \n\nexport default RestaurantList;\n"]},"metadata":{},"sourceType":"module"}